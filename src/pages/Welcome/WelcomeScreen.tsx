import React, { useState } from 'react'
import styles from './WelcomeScreen.module.css'

interface WelcomeScreenProps {
  onSelectGestion?: (tipo: 'fraude' | 'averia') => void
  onSelectSubtipoAveria?: (sub: 'wart' | 'error_averia' | 'error_montaje') => void
}

export const WelcomeScreen: React.FC<WelcomeScreenProps> = ({ onSelectGestion, onSelectSubtipoAveria }) => {
  const [showAveriaSubs, setShowAveriaSubs] = useState(false)

  const handleAveria = () => {
    setShowAveriaSubs(true)
    onSelectGestion?.('averia')
  }

  return (
    <div className={styles.container}>
      <h1 className={styles.title}>Bienvenido a ValorApp</h1>
      <p className={styles.subtitle}>¬øQu√© tipo de gesti√≥n desea realizar hoy?</p>

      <div className={styles.buttonsRow}>
        {!showAveriaSubs && (
          <>
            <button
              type="button"
              className={styles.btnFraude}
              onClick={() => onSelectGestion?.('fraude')}
            >
              ‚ö†Ô∏è Fraude
            </button>
            <button
              type="button"
              className={styles.btnAveria}
              onClick={handleAveria}
            >
              üîß Aver√≠a
            </button>
          </>
        )}

        {showAveriaSubs && (
          <div className={styles.subButtonsWrapper}>
            <p className={styles.subLabel}>Seleccione el tipo de aver√≠a:</p>
            <div className={styles.subButtonsRow}>
              <button
                type="button"
                className={styles.subBtnPrimary}
                onClick={() => onSelectSubtipoAveria?.('wart')}
              >
                üõ†Ô∏è WART
              </button>
              <button
                type="button"
                className={styles.subBtnNeutral}
                onClick={() => onSelectSubtipoAveria?.('error_averia')}
              >
                ‚ùó Error de Aver√≠a
              </button>
              <button
                type="button"
                className={styles.subBtnNeutral}
                onClick={() => onSelectSubtipoAveria?.('error_montaje')}
              >
                ‚öôÔ∏è Error de Montaje
              </button>
            </div>
            <div className={styles.subActions}>
              <button
                type="button"
                className={styles.backLink}
                onClick={() => setShowAveriaSubs(false)}
              >
                ‚Üê Volver
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  )
}

export default WelcomeScreen